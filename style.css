/* ===============================
   TEMA & BAS
   =============================== */
html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"]  { color-scheme: dark; }

:root{
  --bg:#f7f7f8;
  --surface:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --brand:#2563eb;
  --ring:#93c5fd;
  --border:rgba(0,0,0,.12);
  --shadow:rgba(0,0,0,.10);
  --shadow-2:rgba(0,0,0,.18);

  /* Flatpickr tokens */
  --fp-surface:var(--surface);
  --fp-text:var(--text);
  --fp-muted:var(--muted);
  --fp-brand:var(--brand);
  --fp-ring:var(--ring);
  --fp-border:var(--border);
  --fp-shadow:var(--shadow);
  --fp-overlay:rgba(0,0,0,.08);
}
html[data-theme="dark"]{
  --bg:#0b0f14;
  --surface:#111827;
  --text:#e5e7eb;
  --muted:#9aa4b2;
  --brand:#60a5fa;
  --ring:#3b82f6;
  --border:rgba(255,255,255,.16);
  --shadow:rgba(0,0,0,.45);
  --shadow-2:rgba(0,0,0,.6);

  --fp-surface:var(--surface);
  --fp-text:var(--text);
  --fp-muted:var(--muted);
  --fp-brand:var(--brand);
  --fp-ring:var(--ring);
  --fp-border:var(--border);
  --fp-shadow:var(--shadow);
  --fp-overlay:rgba(255,255,255,.06);
}

html,body{
  background:var(--bg);
  min-height:100%;
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
}

/* ===============================
   CARD
   =============================== */
main{
  padding:1.25rem;
  display:grid;
  place-items:center;
}
.card{
  width:min(820px, 92vw);
  background:var(--surface);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:1rem;
  overflow:hidden;
}
.card-elevated{ box-shadow:0 10px 30px var(--shadow); }

.card-header,.card-footer{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  padding:1rem;
  background:color-mix(in srgb, var(--surface) 94%, transparent);
  border-bottom:1px solid var(--border);
}
.card-footer{
  border-top:1px solid var(--border);
  border-bottom:0;
  justify-content:flex-end;
  gap:.5rem;
}
.card-body{ padding:1rem; }

.card-title h3{ margin:0 0 .15rem 0; font-size:1.15rem; }
.card-subtitle{ margin:0; color:var(--muted); font-size:.95rem; }

.header-actions{ display:flex; gap:.5rem; }

/* ===============================
   FORM / INPUTS + DENSITY
   =============================== */
.form-grid{
  display:grid;
  grid-template-columns:1fr;
  /* Standard “normal” spacing */
  row-gap:1.1rem;
  column-gap:1rem;
}
@media (min-width:640px){
  .form-grid{ grid-template-columns:1fr 1fr; }
}

.form-field{ display:grid; gap:.5rem; } /* label ↔ input */

.date-label{ display:block; margin:.4rem 0 .25rem; font-weight:600; }
.help-text{ margin:0; color:var(--muted); font-size:.9rem; }
.error-text{ margin:.2rem 0 0 0; color:#dc2626; font-weight:600; font-size:.9rem; }

/* Density-varianter (växlas via knapp + localStorage) */
.form-grid.density-comfy{
  row-gap:1.6rem;
  column-gap:1.25rem;
}
.form-grid.density-compact{
  row-gap:.6rem;
  column-gap:.75rem;
}
.form-grid.density-normal{
  row-gap:1.1rem;
  column-gap:1rem;
}

/* Inputs (inkl. flatpickr altInput) */
.date-input,
.flatpickr-input[readonly]{
  appearance:none; width:80%;
  background:var(--surface); color:var(--text);
  border:1px solid var(--border); border-radius:.6rem;
  padding:.65rem .8rem; font-size:1rem; font-family:inherit;
  box-shadow:0 2px 6px var(--shadow);
  transition:border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
.date-input:hover,
.flatpickr-input[readonly]:hover{ border-color:var(--brand); }
.date-input:focus-visible,
.flatpickr-input[readonly]:focus-visible{
  outline:none; border-color:var(--brand); box-shadow:0 0 0 3px var(--ring);
}
html[data-theme="dark"] .date-input,
html[data-theme="dark"] .flatpickr-input[readonly]{ background:#1a2230; }

/* Felmarkering */
.field-error .date-input{ border-color:#dc2626; }
.field-error .date-input:focus-visible{
  box-shadow:0 0 0 3px color-mix(in srgb, #dc2626 45%, transparent);
}

/* ===============================
   KNAPPAR
   =============================== */
.btn{
  appearance:none; border:none;
  background:var(--brand); color:#fff;
  padding:.7rem 1rem; border-radius:.7rem;
  font-weight:600; cursor:pointer;
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
  box-shadow:0 4px 14px var(--shadow);
}
.btn:hover{ background:color-mix(in srgb, var(--brand) 85%, white 15%); }
.btn:active{ transform:translateY(1px) scale(.99); }
.btn:focus-visible{ outline:3px solid var(--ring); outline-offset:2px; }

.btn.btn-ghost{
  background:transparent; color:var(--brand);
  border:1px solid color-mix(in srgb, var(--brand) 45%, transparent);
  box-shadow:none;
}
.btn.btn-ghost:hover{ background:color-mix(in srgb, var(--brand) 12%, transparent); }

/* ===============================
   FLATPICKR POPUP
   =============================== */
.flatpickr-calendar{
  background:var(--fp-surface) !important;
  border:1px solid var(--fp-border) !important;
  box-shadow:0 12px 32px var(--fp-shadow) !important;
  color:var(--fp-text) !important;
  border-radius:.9rem !important;
  overflow:hidden;
}
.flatpickr-months,.flatpickr-weekdays{
  background:color-mix(in srgb, var(--fp-surface) 94%, transparent) !important;
  color:var(--fp-text) !important;
  border-bottom:1px solid var(--fp-border) !important;
}
.flatpickr-current-month .flatpickr-monthDropdown-months,
.flatpickr-current-month input.cur-year{ color:var(--fp-text) !important; }
span.flatpickr-weekday{ color:var(--fp-muted) !important; font-weight:600; }

.flatpickr-day{
  color:var(--fp-text) !important;
  border-radius:.55rem !important;
  border:1px solid transparent !important;
}
.flatpickr-day:hover{
  background:color-mix(in srgb, var(--fp-brand) 12%, transparent) !important;
  border-color:color-mix(in srgb, var(--fp-brand) 25%, transparent) !important;
}
.flatpickr-day.today{
  box-shadow:inset 0 0 0 2px color-mix(in srgb, var(--fp-brand) 45%, transparent) !important;
}
.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange{
  background:var(--fp-brand) !important;
  border-color:var(--fp-brand) !important;
  color:#fff !important;
}
.flatpickr-day.inRange{
  background:color-mix(in srgb, var(--fp-brand) 15%, transparent) !important;
  color:var(--fp-text) !important;
}
.flatpickr-day.disabled,
.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay{
  color:color-mix(in srgb, var(--fp-muted) 70%, transparent) !important;
}
.flatpickr-day:focus-visible{
  outline:3px solid var(--fp-ring) !important;
  outline-offset:2px !important;
}
.flatpickr-time input,
.flatpickr-time .flatpickr-am-pm{
  color:var(--fp-text) !important;
  background:transparent !important;
}
.flatpickr-weekwrapper .flatpickr-weeks{
  background:color-mix(in srgb, var(--fp-surface) 96%, transparent) !important;
  border-right:1px solid var(--fp-border) !important;
}
@media (max-width:480px){
  .flatpickr-calendar{ width:100% !important; }
}
